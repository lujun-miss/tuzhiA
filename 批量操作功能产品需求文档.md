# 批量操作功能产品需求文档

## 1. 产品概览

本需求文档描述了图纸管理系统中新增的批量操作功能，包括批量复制和移动功能的详细规格。这些功能旨在提高用户操作效率，优化文件管理流程，提供更直观的用户界面。

## 2. 核心功能

### 2.1 功能模块

| 模块名称 | 功能描述 |
|---------|----------|
| 批量复制功能 | 支持选择多个图纸进行批量复制，并可选择目标文件夹 |
| 批量移动功能 | 支持将图纸移动到指定文件夹 |
| 文件夹审批设置 | 可设置文件夹是否需要审批上传的图纸 |
| 审核状态管理 | 优化审核状态显示，包括待审核、审核通过、无需审核 |
| 操作日志记录 | 记录复制和移动操作的日志信息 |
| UI优化 | 调整上传图纸弹窗高度，优化文件夹选择界面 |

### 2.2 页面详情

| 页面名称 | 模块名称 | 功能描述 |
|---------|---------|----------|
| 图纸管理页面 | 批量复制功能 | 支持选择多个图纸进行复制，可选择目标文件夹，使用树状结构展示文件夹 |
| 图纸管理页面 | 批量移动功能 | 支持将图纸移动到指定文件夹，使用树状结构展示文件夹 |
| 图纸管理页面 | 审核状态管理 | 显示待审核、审核通过、无需审核三种状态 |
| 图纸管理页面 | UI优化 | 调整上传图纸弹窗高度，使其更紧凑 |
| 文件夹管理页面 | 文件夹审批设置 | 添加"上传至此文件夹的图纸需要审批"复选框，带红色备注说明 |
| 日志管理页面 | 操作日志记录 | 在操作类型下拉框中添加复制和移动选项，记录相关操作日志 |

## 3. 核心流程

### 3.1 批量复制流程

1. 用户在图纸列表中选择多个图纸
2. 点击复制按钮，弹出复制模态框
3. 在模态框中确认要复制的图纸（可取消选择）
4. 在树状结构中选择目标文件夹（可多选）
5. 点击确定按钮，系统执行复制操作
6. 系统记录复制操作日志

### 3.2 批量移动流程

1. 用户在图纸列表中选择多个图纸
2. 点击移动按钮，弹出移动模态框
3. 在模态框中确认要移动的图纸（可取消选择）
4. 在树状结构中选择目标文件夹（单选）
5. 点击确定按钮，系统执行移动操作
6. 系统记录移动操作日志

### 3.3 文件夹审批设置流程

1. 用户进入文件夹设置页面
2. 找到"上传至此文件夹的图纸需要审批"复选框
3. 根据需要勾选或取消勾选
4. 保存设置，系统更新文件夹属性

## 4. 用户接口设计

### 4.1 设计风格

- **主色**：使用系统默认主色调
- **辅色**：使用系统默认辅助色调
- **按钮样式**：使用系统默认按钮样式，包括主要按钮、次要按钮
- **字体**：使用系统默认字体
- **布局样式**：使用卡片式布局，响应式设计
- **图标样式**：使用系统默认图标库

### 4.2 页面设计概览

| 页面名称 | 模块名称 | UI元素 |
|---------|---------|--------|
| 图纸管理页面 | 批量复制功能 | 复制模态框，包含图纸选择列表（带复选框）、全选功能、树状文件夹选择器（支持多选） |
| 图纸管理页面 | 批量移动功能 | 移动模态框，包含图纸选择列表（带复选框）、全选功能、树状文件夹选择器（单选） |
| 图纸管理页面 | 审核状态管理 | 状态标签，使用不同颜色区分：待审核（黄色）、审核通过（绿色）、无需审核（灰色） |
| 图纸管理页面 | UI优化 | 上传图纸弹窗高度调整，减少间距，优化输入框大小 |
| 文件夹管理页面 | 文件夹审批设置 | 复选框控件，红色字体备注说明 |
| 日志管理页面 | 操作日志记录 | 操作类型下拉框，包含复制和移动选项 |

### 4.3 自适应

- 支持桌面端、平板端和移动端自适应显示
- 模态框在小屏幕设备上自动调整大小
- 树状文件夹选择器在小屏幕上优化显示

## 5. 功能需求（Functional Requirements）

| 编号 | 功能点 | 用户故事/缘由说明 | 输入/输出/流程 | 详细说明 | 验收标准 |
|-----|--------|-----------------|--------------|----------|----------|
| FR1 | 批量复制图纸 | 作为用户，我希望能够选择多个图纸进行批量复制，以便提高工作效率 | 输入：选择的图纸、目标文件夹<br>输出：复制成功提示<br>流程：选择图纸 → 点击复制 → 选择目标文件夹 → 确认复制 → 显示成功提示 | 1. 支持多选图纸<br>2. 复制模态框中可取消选择图纸<br>3. 支持树状结构选择目标文件夹<br>4. 支持多选目标文件夹 | 1. 能够成功选择多个图纸并复制<br>2. 复制后的图纸正确显示在目标文件夹中<br>3. 系统记录复制操作日志 |
| FR2 | 批量移动图纸 | 作为用户，我希望能够将图纸移动到指定文件夹，以便更好地组织文件 | 输入：选择的图纸、目标文件夹<br>输出：移动成功提示<br>流程：选择图纸 → 点击移动 → 选择目标文件夹 → 确认移动 → 显示成功提示 | 1. 支持多选图纸<br>2. 移动模态框中可取消选择图纸<br>3. 支持树状结构选择目标文件夹<br>4. 仅支持单选目标文件夹 | 1. 能够成功选择多个图纸并移动<br>2. 移动后的图纸正确显示在目标文件夹中<br>3. 原位置不再显示移动的图纸<br>4. 系统记录移动操作日志 |
| FR3 | 文件夹审批设置 | 作为管理员，我希望能够设置文件夹是否需要审批上传的图纸，以便控制审批流程 | 输入：勾选/取消勾选复选框<br>输出：设置保存成功提示<br>流程：进入文件夹设置 → 勾选/取消勾选复选框 → 保存设置 → 显示成功提示 | 1. 在文件夹设置页面添加复选框<br>2. 复选框旁添加红色字体备注说明<br>3. 保存设置后系统更新文件夹属性 | 1. 复选框正确显示<br>2. 备注文字为红色<br>3. 保存设置后系统正确更新文件夹属性 |
| FR4 | 审核状态管理 | 作为用户，我希望能够清晰地看到图纸的审核状态，以便了解审批流程进度 | 输入：无<br>输出：状态显示<br>流程：系统根据图纸状态显示相应标签 | 1. 待审核状态：黄色背景标签<br>2. 审核通过状态：绿色背景标签<br>3. 无需审核状态：灰色背景标签 | 1. 状态标签正确显示<br>2. 不同状态使用不同颜色区分<br>3. "无需审核"状态正确显示 |
| FR5 | 操作日志记录 | 作为管理员，我希望能够查看复制和移动操作的日志，以便进行审计和追溯 | 输入：无<br>输出：日志记录<br>流程：用户执行复制/移动操作 → 系统记录操作日志 → 管理员在日志页面查看 | 1. 在操作类型下拉框中添加复制和移动选项<br>2. 系统记录操作时间、操作人、操作类型、操作对象等信息 | 1. 操作类型下拉框包含复制和移动选项<br>2. 系统正确记录复制和移动操作日志<br>3. 管理员能够在日志页面查看相关日志 |
| FR6 | UI优化 | 作为用户，我希望上传图纸的弹窗更紧凑，以便更好地查看和操作 | 输入：无<br>输出：优化后的弹窗<br>流程：用户点击上传按钮 → 系统显示优化后的弹窗 | 1. 调整上传图纸弹窗高度<br>2. 减小输入框和间距大小<br>3. 优化文件上传区域 | 1. 上传图纸弹窗高度明显减小<br>2. 弹窗内容清晰可见<br>3. 用户操作便捷 |

## 6. 非功能需求（Non-Functional Requirements）

| 编号 | 需求点 | 详细说明 | 验收标准 |
|-----|--------|----------|----------|
| NF1 | 性能要求 | 批量复制和移动操作应在3秒内完成（10个图纸以内） | 1. 10个图纸以内的批量操作在3秒内完成<br>2. 操作过程中系统响应正常 |
| NF2 | 可用性要求 | 界面设计应符合用户习惯，操作流程清晰易懂 | 1. 新用户无需培训即可使用批量操作功能<br>2. 用户满意度调查评分不低于4.5（满分5分） |
| NF3 | 兼容性要求 | 支持主流浏览器，包括Chrome、Firefox、Safari、Edge | 1. 在所有主流浏览器中功能正常<br>2. 界面显示一致 |
| NF4 | 安全性要求 | 操作日志应记录完整的操作信息，包括操作人、操作时间、操作类型、操作对象等 | 1. 日志记录完整准确<br>2. 日志信息不可篡改 |

## 7. 数据需求

| 编号 | 数据点 | 数据结构 | 存储方式 |
|-----|--------|----------|----------|
| DR1 | 图纸信息 | 包含图纸ID、名称、版本、上传时间、上传人、状态等字段 | 数据库 |
| DR2 | 文件夹信息 | 包含文件夹ID、名称、父文件夹ID、是否需要审批等字段 | 数据库 |
| DR3 | 操作日志 | 包含日志ID、操作人、操作时间、操作类型、操作对象、操作内容等字段 | 数据库 |

## 8. 范围限定

- 批量操作功能支持最多选择50个图纸
- 树状文件夹选择器最多显示3级文件夹结构
- 移动操作仅支持单选目标文件夹
- 复制操作支持多选目标文件夹

## 9. 验收标准

| 编号 | 关联需求 | 验收说明 | 测试方法 |
|-----|----------|----------|----------|
| AC1 | FR1 | 能够成功选择多个图纸并批量复制到指定文件夹 | 功能测试：选择多个图纸，执行复制操作，验证目标文件夹中是否出现复制的图纸 |
| AC2 | FR2 | 能够成功选择多个图纸并批量移动到指定文件夹 | 功能测试：选择多个图纸，执行移动操作，验证目标文件夹中是否出现移动的图纸，原位置是否不再显示 |
| AC3 | FR3 | 文件夹审批设置功能正常，备注文字为红色 | 功能测试：进入文件夹设置页面，勾选/取消勾选复选框，验证设置是否保存成功；视觉测试：确认备注文字为红色 |
| AC4 | FR4 | 审核状态正确显示，不同状态使用不同颜色区分 | 视觉测试：查看图纸列表，确认不同状态的标签颜色正确；功能测试：验证状态变更是否正确显示 |
| AC5 | FR5 | 操作日志正确记录复制和移动操作 | 功能测试：执行复制和移动操作，查看日志页面，验证日志是否记录完整 |
| AC6 | FR6 | 上传图纸弹窗高度减小，界面更紧凑 | 视觉测试：打开上传图纸弹窗，确认高度减小，界面紧凑 |
| AC7 | NF1 | 批量操作性能满足要求 | 性能测试：选择10个图纸执行批量操作，测量完成时间 |
| AC8 | NF2 | 界面设计符合用户习惯，操作流程清晰 | 用户测试：邀请5名用户使用批量操作功能，收集反馈 |
| AC9 | NF3 | 在主流浏览器中功能正常 | 兼容性测试：在Chrome、Firefox、Safari、Edge浏览器中测试功能 |
| AC10 | NF4 | 操作日志记录完整准确 | 功能测试：执行各种操作，验证日志记录是否完整 |

## 10. 风险/依赖备注

| 类型 | 关联编号/功能点 | 具体内容/说明 | 备注 |
|------|----------------|---------------|------|
| 风险 | FR1/批量复制功能 | 批量复制大量图纸可能导致系统性能下降 | 建议限制单次复制数量不超过50个 |
| 风险 | FR2/批量移动功能 | 批量移动图纸可能影响相关的引用和链接 | 建议在移动前进行依赖检查 |
| 依赖 | FR3/文件夹审批设置 | 依赖于现有的审批流程系统 | 确保与现有审批流程集成 |
| 依赖 | FR4/审核状态管理 | 依赖于现有的状态管理系统 | 确保状态变更逻辑正确 |
| 依赖 | FR5/操作日志记录 | 依赖于现有的日志系统 | 确保日志记录格式一致 |
