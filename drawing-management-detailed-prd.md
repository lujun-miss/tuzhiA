# 企业图纸管理系统详细产品需求文档

## 1. 产品概览

企业图纸管理系统是一个专为企业内部图纸文件管理设计的系统，旨在提升企业图纸管理效率，确保图纸文件的安全性和可追溯性。系统通过集中存储、版本控制、规范审批流程等功能，实现图纸文件的高效管理和安全保障。

### 1.1 项目背景

在企业日常运营中，图纸文件的管理是一项重要但复杂的工作。传统的图纸管理方式存在以下问题：
- 图纸文件分散存储，难以统一管理和查找
- 图纸版本混乱，容易使用错误版本
- 图纸审批流程不规范，缺乏有效的审批记录
- 图纸安全难以保障，容易泄露或丢失

为了解决这些问题，我们设计了企业图纸管理系统，通过集中存储、版本控制、规范审批流程等功能，实现图纸文件的高效管理和安全保障。

### 1.2 产品价值

- **提高管理效率**：集中存储图纸文件，支持快速搜索和查找，减少人工管理成本
- **确保版本统一**：严格的版本控制机制，确保使用最新版本的图纸
- **规范审批流程**：标准化的审批流程，提高审批效率，确保图纸质量
- **保障信息安全**：完善的权限管理和操作日志，确保图纸文件的安全性
- **促进协作共享**：支持多人协作，方便团队成员共享和访问图纸文件

### 1.3 设计理念

- **用户至上**：以用户需求为中心，设计简洁直观的操作界面
- **安全可靠**：采用多层次安全保障机制，确保图纸文件的安全性
- **高效便捷**：优化操作流程，减少不必要的步骤，提高工作效率
- **可扩展性**：系统设计具有良好的可扩展性，支持未来功能的增加和业务的发展

### 1.4 目标用户

- **企业管理层**：需要了解企业图纸整体情况，审批重要图纸
- **设计工程师**：需要上传、修改、查看图纸文件
- **生产人员**：需要查看和使用图纸文件进行生产
- **系统管理员**：需要管理系统用户、权限和配置

## 2. 核心功能

### 2.1 功能模块

我们的企业图纸管理系统包含以下核心页面：

1. **图纸管理主页面**：包含文件夹树、操作栏、筛选条件、路径导航、图纸列表、操作说明

### 2.2 页面详情

#### 2.2.1 图纸管理主页面

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 文件夹树展示 | 展示系统中的文件夹结构，支持展开/折叠 | 无 | 文件夹树状结构 | 左侧固定显示，包含根目录及其子文件夹，点击文件夹可展开/折叠，点击文件夹名称可选中该文件夹 |
| 文件夹搜索 | 在文件夹树中搜索特定文件夹 | 搜索关键词 | 匹配的文件夹列表 | 位于文件夹树顶部，输入关键词后实时过滤显示匹配的文件夹 |
| 上传图纸 | 打开上传模态框，支持上传新图纸 | 点击"上传图纸"按钮 | 上传模态框 | 位于顶部操作栏，点击后打开上传模态框，支持拖拽上传和文件选择 |
| 批量下载 | 批量下载选中的图纸文件 | 选择多个图纸后点击"批量下载"按钮 | 下载文件包 | 位于顶部操作栏，仅在选中图纸时可用 |
| 批量删除 | 批量删除选中的图纸文件 | 选择多个图纸后点击"批量删除"按钮 | 删除确认模态框 | 位于顶部操作栏，仅在选中图纸时可用，点击后打开删除确认模态框 |
| 图纸名称筛选 | 根据图纸名称筛选图纸列表 | 输入图纸名称关键词 | 筛选后的图纸列表 | 位于筛选条件区域，输入关键词后点击"查询"按钮生效 |
| 审批状态筛选 | 根据审批状态筛选图纸列表 | 选择审批状态 | 筛选后的图纸列表 | 位于筛选条件区域，下拉选择审批状态后点击"查询"按钮生效 |
| 重置筛选 | 重置所有筛选条件 | 点击"重置"按钮 | 筛选条件清空，显示全部图纸 | 位于筛选条件区域，点击后清空所有筛选输入 |
| 路径导航 | 显示当前所在文件夹的路径 | 无 | 路径导航条 | 位于筛选条件下方，显示从根目录到当前文件夹的完整路径，点击路径中的文件夹可快速跳转 |
| 图纸列表展示 | 展示当前文件夹下的图纸和子文件夹 | 无 | 图纸和文件夹列表 | 以表格形式展示，包含复选框、名称、上传时间、上传人员、审批状态、操作等列 |
| 文件夹操作 | 对文件夹进行打开、修改、删除操作 | 点击文件夹操作按钮 | 相应的操作界面 | 文件夹行的操作列包含打开、修改、删除按钮 |
| 图纸详情查看 | 查看图纸的详细信息 | 点击图纸操作列中的"详情"按钮 | 详情模态框 | 显示图纸基本信息、审批记录等详细内容 |
| 图纸编辑 | 修改图纸的基本信息 | 点击图纸操作列中的"编辑"按钮 | 编辑模态框 | 可修改图纸名称、版本号、描述等信息，修改后可重新提交审批 |
| 图纸下载 | 下载图纸文件 | 点击图纸操作列中的"下载"按钮 | 下载文件 | 直接下载图纸文件到本地 |
| 图纸复制 | 复制图纸到其他文件夹 | 点击图纸操作列中的"复制"按钮 | 复制模态框 | 可选择多个目标文件夹，复制后生成副本，副本状态为待审核 |
| 图纸移动 | 移动图纸到其他文件夹 | 点击图纸操作列中的"移动"按钮 | 移动模态框 | 选择目标文件夹后将图纸移动到该文件夹，状态保持不变 |
| 图纸审批 | 对图纸进行审批操作 | 点击图纸操作列中的"审批"按钮 | 审批模态框 | 可选择通过或退回，添加审批意见和附件 |
| 图纸删除 | 删除图纸文件 | 点击图纸操作列中的"删除"按钮 | 删除确认模态框 | 点击后打开删除确认模态框，确认后删除图纸 |
| 全局拖拽上传 | 从桌面拖拽文件到系统界面上传 | 拖拽文件到左侧文件夹树或右侧内容区 | 上传模态框 | 拖拽到左侧文件夹节点则上传到该文件夹，拖拽到右侧内容区则上传到当前选中文件夹 |
| 操作说明查看 | 查看系统操作的详细说明 | 无 | 操作说明文档 | 位于页面底部，包含拖拽上传说明、复制操作说明、移动操作说明、不同状态下的操作权限说明、审核退回状态说明 |

### 2.3 模态框功能

#### 2.3.1 上传模态框

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 拖拽上传区域 | 支持拖拽文件到此处上传 | 拖拽文件 | 文件列表显示 | 位于模态框顶部，支持拖拽多个文件，拖拽时显示高亮效果 |
| 文件选择 | 点击选择文件进行上传 | 点击"选择文件"按钮 | 文件选择对话框 | 位于拖拽上传区域内，点击后打开文件选择对话框 |
| 文件夹选择 | 选择图纸要上传到的文件夹 | 点击文件夹选择框 | 文件夹树形下拉框 | 支持多级文件夹选择，包含搜索功能，可选择多个文件夹 |
| 图纸名称输入 | 输入图纸的名称 | 文本输入 | 图纸名称保存 | 手动输入，不再自动从文件名提取 |
| 版本号输入 | 输入图纸的版本号 | 文本输入 | 版本号保存 | 默认为"V1.0"，可修改 |
| 描述输入 | 输入图纸的描述信息 | 文本域输入 | 描述信息保存 | 支持多行文本输入 |
| 开始上传 | 开始上传选中的文件 | 点击"开始上传"按钮 | 上传进度模态框 | 点击后开始上传文件，显示上传进度 |
| 取消上传 | 取消上传操作 | 点击"取消"按钮 | 关闭上传模态框 | 点击后关闭上传模态框，不保存任何修改 |

#### 2.3.2 详情模态框

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 图纸基本信息展示 | 展示图纸的基本信息 | 无 | 图纸信息 | 包含所属文件夹、图纸名称、版本号、审批状态、上传时间、上传人员、图纸描述等 |
| 附件展示 | 展示图纸的附件文件 | 无 | 附件列表 | 显示图纸相关的附件文件，包含文件名和下载按钮 |
| 审批记录展示 | 展示图纸的审批历史记录 | 无 | 审批记录列表 | 以表格形式展示审批操作类型、操作人、操作时间、审批状态、审批意见、修改意见等 |
| 关闭详情 | 关闭详情模态框 | 点击"关闭"按钮 | 模态框关闭 | 点击后关闭详情模态框 |

#### 2.3.3 编辑模态框

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 所属文件夹修改 | 修改图纸所属的文件夹 | 下拉选择 | 文件夹信息更新 | 下拉选择新的文件夹 |
| 图纸名称修改 | 修改图纸的名称 | 文本输入 | 图纸名称更新 | 可修改图纸名称 |
| 版本号修改 | 修改图纸的版本号 | 文本输入 | 版本号更新 | 可修改版本号 |
| 审批状态显示 | 显示图纸的审批状态 | 无 | 审批状态显示 | 审批状态为只读，不可修改 |
| 描述修改 | 修改图纸的描述信息 | 文本域输入 | 描述信息更新 | 可修改图纸描述 |
| 附件上传 | 上传新的附件文件 | 点击文件选择按钮 | 文件上传 | 可上传新的附件文件 |
| 审批记录展示 | 展示图纸的审批历史记录 | 无 | 审批记录列表 | 以表格形式展示审批操作类型、操作人、操作时间、审批状态、审批意见、修改意见等 |
| 保存并重新提交 | 保存修改并重新提交审批 | 点击"保存并重新提交"按钮 | 保存成功提示 | 保存修改后，图纸状态变为待审核 |
| 取消编辑 | 取消编辑操作 | 点击"取消"按钮 | 关闭编辑模态框 | 点击后关闭编辑模态框，不保存任何修改 |

#### 2.3.4 删除确认模态框

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 删除确认 | 确认是否删除选中的图纸 | 点击"删除"按钮 | 确认删除操作 | 显示要删除的图纸信息，确认后执行删除操作 |
| 取消删除 | 取消删除操作 | 点击"取消"按钮 | 关闭删除确认模态框 | 点击后关闭模态框，不执行删除操作 |

#### 2.3.5 审批模态框

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 审批结果选择 | 选择审批结果（通过或退回） | 选择单选按钮 | 审批结果保存 | 二选一：通过或退回 |
| 移动至文件夹 | 选择审批通过后移动到的文件夹 | 下拉选择 | 目标文件夹保存 | 仅在选择"通过"时显示 |
| 审批意见输入 | 输入审批意见 | 文本域输入 | 审批意见保存 | 可输入详细的审批意见 |
| 附件上传 | 上传审批相关的附件 | 点击文件选择按钮 | 文件上传 | 可上传标记图纸中需要修改的地方的附件 |
| 提交审批 | 提交审批操作 | 点击"提交"按钮 | 审批结果保存 | 点击后执行审批操作，更新图纸状态 |
| 取消审批 | 取消审批操作 | 点击"取消"按钮 | 关闭审批模态框 | 点击后关闭模态框，不执行审批操作 |

#### 2.3.6 复制模态框

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 文件夹选择 | 选择要复制到的目标文件夹 | 勾选文件夹复选框 | 目标文件夹列表 | 支持全选和多选，可展开/折叠文件夹树 |
| 图纸选择 | 选择要复制的图纸 | 勾选图纸复选框 | 要复制的图纸列表 | 支持全选和多选 |
| 复制操作 | 执行复制操作 | 点击"复制"按钮 | 复制成功提示 | 点击后将选中的图纸复制到选中的文件夹，生成副本 |
| 取消复制 | 取消复制操作 | 点击"取消"按钮 | 关闭复制模态框 | 点击后关闭模态框，不执行复制操作 |

#### 2.3.7 移动模态框

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 目标文件夹选择 | 选择要移动到的目标文件夹 | 选择单选按钮 | 目标文件夹保存 | 在文件夹树中选择一个目标文件夹 |
| 移动操作 | 执行移动操作 | 点击"移动"按钮 | 移动成功提示 | 点击后将图纸移动到选中的文件夹，状态保持不变 |
| 取消移动 | 取消移动操作 | 点击"取消"按钮 | 关闭移动模态框 | 点击后关闭模态框，不执行移动操作 |

#### 2.3.8 上传进度模态框

| 功能名称 | 描述 | 输入 | 输出 | 详细说明 |
|---------|------|------|------|----------|
| 上传文件名显示 | 显示当前正在上传的文件名 | 无 | 文件名显示 | 位于进度条上方，显示当前上传的文件名 |
| 上传进度显示 | 显示文件上传的进度 | 无 | 进度条和百分比 | 以进度条形式显示上传进度，实时更新百分比 |
| 取消上传 | 取消当前上传操作 | 点击"取消"按钮 | 关闭进度模态框 | 点击后取消上传操作，关闭进度模态框 |

## 3. 核心流程

### 3.1 图纸上传流程

1. 用户点击顶部操作栏中的"上传图纸"按钮
2. 系统打开上传模态框
3. 用户拖拽文件到上传区域或点击"选择文件"按钮选择文件
4. 系统显示选中的文件列表
5. 用户选择要上传到的文件夹（可选择多个）
6. 用户输入图纸名称、版本号和描述
7. 用户点击"开始上传"按钮
8. 系统打开上传进度模态框，显示上传进度
9. 上传完成后，系统关闭进度模态框和上传模态框
10. 系统显示上传成功提示
11. 系统自动将图纸状态设置为待审核
12. 图纸列表刷新，显示新上传的图纸

### 3.2 全局拖拽上传流程

1. 用户从桌面拖拽文件到系统界面
2. 如果拖拽到左侧文件夹树的某个文件夹节点上：
   - 该文件夹节点显示高亮效果
   - 系统显示"释放到 [文件夹名称]"的提示
   - 用户释放文件后，系统打开上传模态框，并自动填充目标文件夹为该文件夹
3. 如果拖拽到右侧内容区：
   - 右侧内容区显示高亮效果
   - 系统显示"释放到此处上传到 [当前选中文件夹]"的提示
   - 用户释放文件后，系统打开上传模态框，并自动填充目标文件夹为当前选中的文件夹
4. 用户在上传模态框中确认上传信息，点击"开始上传"按钮
5. 系统执行上传操作，完成后显示成功提示

### 3.3 图纸审批流程

1. 用户在图纸列表中点击某个图纸的"审批"按钮
2. 系统打开审批模态框，显示图纸基本信息
3. 用户选择审批结果（通过或退回）
4. 如果选择"通过"，用户可选择移动到的目标文件夹
5. 用户输入审批意见，可上传附件
6. 用户点击"提交"按钮
7. 系统更新图纸的审批状态
8. 系统记录审批操作日志
9. 系统关闭审批模态框，显示审批成功提示
10. 图纸列表刷新，显示更新后的审批状态

### 3.4 图纸复制流程

1. 用户在图纸列表中点击某个图纸的"复制"按钮
2. 系统打开复制模态框
3. 用户在左侧文件夹树中选择要复制到的目标文件夹（可多选）
4. 用户在右侧图纸列表中确认要复制的图纸
5. 用户点击"复制"按钮
6. 系统创建图纸副本，自动生成新的版本号
7. 系统将副本状态设置为待审核
8. 系统记录操作日志
9. 系统关闭复制模态框，显示复制成功提示
10. 图纸列表刷新，显示新创建的副本

### 3.5 图纸移动流程

1. 用户在图纸列表中点击某个图纸的"移动"按钮
2. 系统打开移动模态框
3. 用户在文件夹树中选择要移动到的目标文件夹
4. 用户点击"移动"按钮
5. 系统更新图纸所属文件夹
6. 系统记录操作日志
7. 系统关闭移动模态框，显示移动成功提示
8. 图纸列表刷新，图纸从原文件夹消失，出现在目标文件夹中

## 4. 用户接口设计

### 4.1 设计风格

- **主色调**：蓝色 (#1890ff)，代表专业、信任和稳定
- **辅助色**：绿色 (#52c41a) 表示成功，黄色 (#faad14) 表示警告，红色 (#f5222d) 表示错误
- **中性色**：白色 (#ffffff) 作为背景，浅灰色 (#f0f2f5) 作为分隔，深灰色 (#262626) 作为文本
- **字体**：Microsoft YaHei, Arial, sans-serif
- **按钮样式**：圆角矩形按钮，有 hover 效果
- **卡片样式**：白色背景，轻微阴影，圆角边框
- **图标**：使用 Font Awesome 图标库

### 4.2 页面布局

- **整体布局**：左侧固定文件夹树（宽度 64px），右侧内容区（自适应宽度）
- **右侧内容区结构**：
  - 顶部操作栏：包含页面标题和操作按钮
  - 筛选条件区域：包含图纸名称和审批状态筛选
  - 路径导航：显示当前所在文件夹路径
  - 图纸列表区域：以表格形式展示图纸和文件夹
  - 操作说明区域：位于页面底部，包含详细的操作说明
- **模态框**：居中显示，带有标题栏、内容区和操作按钮
- **响应式设计**：适配不同屏幕尺寸，在小屏幕设备上自动调整布局

### 4.3 响应式设计

- **桌面端**：完整显示所有功能和布局
- **平板端**：调整布局，保持核心功能可用
- **移动端**：简化布局，只显示核心功能，使用汉堡菜单替代左侧导航栏

### 4.4 组件设计

- **按钮**：主要按钮（蓝色）、次要按钮（白色边框）、文本按钮、图标按钮
- **输入框**：文本输入框、下拉选择框、文本域
- **表格**：可选择表格、带操作列的表格
- **模态框**：信息模态框、确认模态框、操作模态框
- **提示框**：成功提示、警告提示、错误提示
- **进度条**：上传进度条
- **树形控件**：文件夹树状结构
- **路径导航**：面包屑导航

### 4.5 图标规范

- **使用场景**：导航菜单、操作按钮、状态指示、提示信息
- **图标风格**：使用 Font Awesome 图标库，保持图标风格统一
- **图标大小**：导航菜单图标 16px，操作按钮图标 14px，状态指示图标 12px
- **图标颜色**：与文本颜色一致，或使用主题色突出显示

## 5. 技术实现细节

### 5.1 前端技术栈

- **HTML5**：页面结构
- **Tailwind CSS**：页面样式
- **JavaScript**：交互逻辑
- **Font Awesome**：图标库

### 5.2 核心功能实现

#### 5.2.1 文件夹树功能

- 使用嵌套的 div 结构实现树状布局
- 通过 JavaScript 监听点击事件，实现展开/折叠功能
- 使用 Font Awesome 图标表示文件夹的展开/折叠状态
- 实现文件夹节点的点击选中功能，更新当前选中文件夹

#### 5.2.2 拖拽上传功能

- 使用 HTML5 Drag and Drop API 实现拖拽功能
- 监听 dragover、dragleave、drop 事件，实现拖拽过程中的视觉反馈
- 实现全局拖拽监听，区分拖拽到文件夹树和拖拽到内容区的不同处理逻辑
- 创建动态拖拽提示元素，显示拖拽目标信息

#### 5.2.3 模态框功能

- 使用固定定位和半透明背景实现模态框效果
- 通过 JavaScript 控制模态框的显示和隐藏
- 实现模态框内的表单验证和提交逻辑
- 实现模态框之间的切换（如上传模态框到上传进度模态框）

#### 5.2.4 表格操作功能

- 实现表格行的悬停效果
- 实现表格操作按钮的点击事件处理
- 实现批量选择和批量操作功能
- 实现表格的分页功能

### 5.3 性能优化

- **事件委托**：使用事件委托减少事件监听器的数量
- **DOM 操作优化**：减少直接 DOM 操作，使用文档片段批量更新
- **图片优化**：使用适当大小的图标，避免过大的图片文件
- **代码组织**：模块化组织 JavaScript 代码，提高可维护性

### 5.4 兼容性考虑

- **浏览器兼容性**：支持主流现代浏览器（Chrome、Firefox、Safari、Edge）
- **响应式设计**：适配不同屏幕尺寸
- **无障碍访问**：支持键盘导航和屏幕阅读器

## 6. 其他相关信息

### 6.1 术语定义

- **图纸**：企业生产、设计过程中产生的各种技术文件，如装配图、结构图、电气图等
- **版本号**：图纸的版本标识，如 V1.0、V2.1 等
- **审批状态**：图纸的审批状态，包括待审核、审核通过、审核退回、无需审核
- **文件夹**：用于组织和分类图纸的容器
- **路径导航**：显示从根目录到当前文件夹的完整路径

### 6.2 操作权限说明

| 审批状态 | 可执行操作 |
|---------|------------|
| 待审核 | 查看、修改、下载、复制、移动、审批、删除 |
| 审核通过 | 查看、下载、复制、移动；修改和删除需高级权限 |
| 审核退回 | 查看、修改、下载、复制、移动、审批、删除 |
| 无需审核 | 查看、修改、下载、复制、移动、删除 |

### 6.3 复制操作说明

- 复制后的图纸：上传时间为当前时间，上传人员为执行复制操作的人员
- 复制后的图纸状态：无论原图纸状态如何，副本状态均为"待审核"
- 复制权限：所有状态的图纸均可复制

### 6.4 移动操作说明

- 移动后的图纸：上传时间和上传人员保持不变，仍为原图纸的属性
- 移动后的图纸状态：保持原图纸的审批状态不变
- 移动权限：所有状态的图纸均可移动

### 6.5 审核退回状态说明

- 审核退回的图纸需要修改后重新提交审批
- 审批人员可在退回时上传附件，标记需要修改的地方
- 退回的图纸会显示在审批记录中，包含审批意见和附件

## 7. 总结

企业图纸管理系统是一个专为企业内部图纸文件管理设计的系统，通过集中存储、版本控制、规范审批流程等功能，实现图纸文件的高效管理和安全保障。系统具有用户友好的界面、完善的功能和可靠的性能，能够满足企业对图纸管理的各种需求。

本产品需求文档详细描述了系统的功能模块、页面详情、核心流程、用户接口设计和技术实现细节，为系统开发提供了清晰的指导。在开发过程中，我们将严格按照本文档的要求进行实现，确保系统的质量和用户体验。