<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户管理 - 企业图纸管理系统</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- 自定义配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1890ff',
                        success: '#52c41a',
                        warning: '#faad14',
                        danger: '#f5222d',
                        light: '#f0f2f5',
                        'gray-border': '#e8e8e8',
                        'gray-text': '#8c8c8c',
                        'text-dark': '#262626'
                    },
                    fontFamily: {
                        sans: ['Microsoft YaHei', 'Arial', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .transition-all-300 {
                transition: all 0.3s ease;
            }
            .shadow-hover {
                @apply transition-all-300 hover:shadow-md;
            }
            .status-active {
                @apply bg-success/20 text-success;
            }
            .status-inactive {
                @apply bg-danger/20 text-danger;
            }
        }
    </style>
    <style>
        /* 自定义滚动条样式 */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body class="bg-light min-h-screen font-sans text-text-dark m-0 p-0 overflow-hidden">
    <!-- 容器 -->
    <div class="w-screen h-screen flex flex-col">
        <!-- 页面标题 -->
        <div class="bg-white border-b border-gray-border p-4">
            <h2 class="text-xl font-semibold">用户管理</h2>
        </div>
        
        <!-- 主要内容区 -->
        <div class="flex-1 overflow-hidden p-0">
            <div class="h-full bg-white border-t border-gray-border flex flex-col p-4 overflow-y-auto">
                <!-- 操作按钮 -->
                <div class="mb-6">
                    <!-- 高级筛选条件 -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-text mb-1">姓名</label>
                            <input type="text" placeholder="请输入姓名" class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-text mb-1">所属部门</label>
                            <select class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                                <option>全部</option>
                                <option>管理员</option>
                                <option>设计师</option>
                                <option>审批人</option>
                                <option>普通成员</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-text mb-1">所属部门</label>
                            <select class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                                <option>全部</option>
                                <option>IT部门</option>
                                <option>设计部</option>
                                <option>生产部</option>
                                <option>财务部</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex justify-end mt-4">
                        <button class="bg-white border border-gray-border hover:border-primary text-gray-text hover:text-primary px-4 py-2 rounded-md transition-all-300 mr-2">
                            <i class="fa fa-refresh mr-1"></i>
                            <span>重置</span>
                        </button>
                        <button class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md transition-all-300 mr-2">
                            <i class="fa fa-search mr-1"></i>
                            <span>查询</span>
                        </button>
                        <button class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md flex items-center transition-all-300">
                            <i class="fa fa-plus mr-2"></i>
                            <span>添加用户</span>
                        </button>
                    </div>
                </div>
                
                <!-- 用户列表 -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <div class="overflow-x-auto">
                        <table class="min-w-full">
                            <thead>
                                <tr class="border-b border-gray-border">
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-text">用户账号</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-text">姓名</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-text">所属部门</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-text">角色</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-text">状态</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-text">操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-gray-border hover:bg-light/50 transition-all-300">
                                    <td class="py-3 px-4">admin</td>
                                    <td class="py-3 px-4">管理员</td>
                                    <td class="py-3 px-4">IT部门</td>
                                    <td class="py-3 px-4">管理员</td>
                                    <td class="py-3 px-4">
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" value="" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                            <span class="ml-3 text-sm font-medium text-gray-text">启用</span>
                                        </label>
                                    </td>
                                    <td class="py-3 px-4">
                                        <div class="flex space-x-2">
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="编辑">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="分配角色">
                                                <i class="fa fa-user-plus"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="设置权限">
                                                <i class="fa fa-folder"></i>
                                            </button>
                                            <button class="text-gray-text hover:text-danger transition-all-300" title="删除">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-gray-border hover:bg-light/50 transition-all-300">
                                    <td class="py-3 px-4">zhanggong</td>
                                    <td class="py-3 px-4">张工</td>
                                    <td class="py-3 px-4">设计部</td>
                                    <td class="py-3 px-4">设计师</td>
                                    <td class="py-3 px-4">
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" value="" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                            <span class="ml-3 text-sm font-medium text-gray-text">启用</span>
                                        </label>
                                    </td>
                                    <td class="py-3 px-4">
                                        <div class="flex space-x-2">
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="编辑">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="分配角色">
                                                <i class="fa fa-user-plus"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="设置权限">
                                                <i class="fa fa-folder"></i>
                                            </button>
                                            <button class="text-gray-text hover:text-danger transition-all-300" title="删除">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-gray-border hover:bg-light/50 transition-all-300">
                                    <td class="py-3 px-4">ligong</td>
                                    <td class="py-3 px-4">李工</td>
                                    <td class="py-3 px-4">设计部</td>
                                    <td class="py-3 px-4">设计师</td>
                                    <td class="py-3 px-4">
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" value="" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                            <span class="ml-3 text-sm font-medium text-gray-text">启用</span>
                                        </label>
                                    </td>
                                    <td class="py-3 px-4">
                                        <div class="flex space-x-2">
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="编辑">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="分配角色">
                                                <i class="fa fa-user-plus"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="设置权限">
                                                <i class="fa fa-folder"></i>
                                            </button>
                                            <button class="text-gray-text hover:text-danger transition-all-300" title="删除">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-gray-border hover:bg-light/50 transition-all-300">
                                    <td class="py-3 px-4">wanggong</td>
                                    <td class="py-3 px-4">王工</td>
                                    <td class="py-3 px-4">设计部</td>
                                    <td class="py-3 px-4">审批人</td>
                                    <td class="py-3 px-4">
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" value="" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                            <span class="ml-3 text-sm font-medium text-gray-text">启用</span>
                                        </label>
                                    </td>
                                    <td class="py-3 px-4">
                                        <div class="flex space-x-2">
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="编辑">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="分配角色">
                                                <i class="fa fa-user-plus"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="设置权限">
                                                <i class="fa fa-folder"></i>
                                            </button>
                                            <button class="text-gray-text hover:text-danger transition-all-300" title="删除">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-light/50 transition-all-300">
                                    <td class="py-3 px-4">zhaogong</td>
                                    <td class="py-3 px-4">赵工</td>
                                    <td class="py-3 px-4">生产部</td>
                                    <td class="py-3 px-4">普通成员</td>
                                    <td class="py-3 px-4">
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" value="" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                            <span class="ml-3 text-sm font-medium text-gray-text">禁用</span>
                                        </label>
                                    </td>
                                    <td class="py-3 px-4">
                                        <div class="flex space-x-2">
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="编辑">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="分配角色">
                                                <i class="fa fa-user-plus"></i>
                                            </button>
                                            <button class="text-primary hover:text-primary/80 transition-all-300" title="设置权限">
                                                <i class="fa fa-folder"></i>
                                            </button>
                                            <button class="text-gray-text hover:text-danger transition-all-300" title="删除">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- 分页 -->
                    <div class="flex flex-col md:flex-row md:items-center justify-between mt-6">
                        <div class="text-sm text-gray-text mb-4 md:mb-0">
                            显示 1-5 条，共 12 条
                        </div>
                        <div class="flex items-center space-x-1">
                            <button class="w-8 h-8 flex items-center justify-center border border-gray-border rounded-md text-gray-text hover:border-primary hover:text-primary transition-all-300">
                                <i class="fa fa-angle-left"></i>
                            </button>
                            <button class="w-8 h-8 flex items-center justify-center border border-primary bg-primary text-white rounded-md">1</button>
                            <button class="w-8 h-8 flex items-center justify-center border border-gray-border rounded-md text-gray-text hover:border-primary hover:text-primary transition-all-300">2</button>
                            <button class="w-8 h-8 flex items-center justify-center border border-gray-border rounded-md text-gray-text hover:border-primary hover:text-primary transition-all-300">3</button>
                            <button class="w-8 h-8 flex items-center justify-center border border-gray-border rounded-md text-gray-text hover:border-primary hover:text-primary transition-all-300">
                                <i class="fa fa-angle-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 权限设置模态框 -->
    <div id="permission-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden">
            <!-- 模态框标题 -->
            <div class="bg-white border-b border-gray-border p-4 flex justify-between items-center">
                <h3 class="text-lg font-semibold">用户权限设置</h3>
                <button id="close-permission-modal" class="text-gray-text hover:text-danger transition-all-300">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <!-- 模态框内容 -->
            <div class="p-6 max-h-[calc(90vh-120px)] overflow-y-auto">
                <!-- 用户信息 -->
                <div class="mb-6">
                    <h4 class="font-medium mb-2">用户：<span id="modal-user-name">管理员</span></h4>
                    <p class="text-sm text-gray-text">为该用户分配对应的文件夹访问权限</p>
                </div>
                
                <!-- 权限说明 -->
                <div class="mb-6 p-3 bg-light rounded-md">
                    <h5 class="font-medium mb-2 text-primary">权限说明</h5>
                    <ul class="text-sm text-gray-text space-y-1">
                        <li><i class="fa fa-info-circle mr-1"></i> <strong>权限优先级</strong>：个人权限优先级高于角色权限</li>
                        <li><i class="fa fa-info-circle mr-1"></i> <strong>权限继承</strong>：用户默认继承所属角色的权限</li>
                        <li><i class="fa fa-info-circle mr-1"></i> <strong>权限覆盖</strong>：个人权限设置将覆盖角色权限</li>
                        <li><i class="fa fa-info-circle mr-1"></i> <strong>权限来源</strong>：灰色勾选表示继承自角色，蓝色勾选表示个人设置</li>
                    </ul>
                </div>
                
                <!-- 文件管理权限 -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-3">
                        <h5 class="font-medium">文件管理权限</h5>
                        <div class="flex space-x-2">
                            <button class="text-sm text-gray-text hover:text-primary transition-all-300">展开/折叠</button>
                            <button class="text-sm text-gray-text hover:text-primary transition-all-300">全选/全不选</button>
                        </div>
                    </div>
                    
                    <div class="space-y-4 ml-4">
                        <!-- 固定文件夹 -->
                        <div>
                            <label class="flex items-center">
                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                <span class="ml-2">固定文件夹</span>
                            </label>
                            <div class="ml-6 mt-2 space-y-4">
                                <!-- 固定文件夹子文件夹 -->
                                <div>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                        <span class="ml-2">高空设备</span>
                                    </label>
                                    <div class="ml-6 mt-2">
                                        <div class="flex flex-wrap gap-4">
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">查看</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">上传</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">下载</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked="false">
                                                <span class="ml-1 text-sm">删除</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">审批</span>
                                                <span class="ml-2 text-xs text-primary" title="个人设置">
                                                    <i class="fa fa-user"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">修改</span>
                                                <span class="ml-2 text-xs text-primary" title="个人设置">
                                                    <i class="fa fa-user"></i>
                                                </span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                        <span class="ml-2">起重设备</span>
                                    </label>
                                    <div class="ml-6 mt-2">
                                        <div class="flex flex-wrap gap-4">
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">查看</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">上传</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">下载</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked="false">
                                                <span class="ml-1 text-sm">删除</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">审批</span>
                                                <span class="ml-2 text-xs text-primary" title="个人设置">
                                                    <i class="fa fa-user"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">修改</span>
                                                <span class="ml-2 text-xs text-primary" title="个人设置">
                                                    <i class="fa fa-user"></i>
                                                </span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 其他文件夹 -->
                        <div>
                            <label class="flex items-center">
                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                <span class="ml-2">其他文件夹</span>
                            </label>
                            <div class="ml-6 mt-2 space-y-4">
                                <!-- 其他文件夹子文件夹 -->
                                <div>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                        <span class="ml-2">通用设备</span>
                                    </label>
                                    <div class="ml-6 mt-2">
                                        <div class="flex flex-wrap gap-4">
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">查看</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">上传</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">下载</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked="false">
                                                <span class="ml-1 text-sm">删除</span>
                                                <span class="ml-2 text-xs text-gray-text" title="继承自角色">
                                                    <i class="fa fa-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">审批</span>
                                                <span class="ml-2 text-xs text-primary" title="个人设置">
                                                    <i class="fa fa-user"></i>
                                                </span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                                <span class="ml-1 text-sm">修改</span>
                                                <span class="ml-2 text-xs text-primary" title="个人设置">
                                                    <i class="fa fa-user"></i>
                                                </span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 模态框底部 -->
            <div class="bg-white border-t border-gray-border p-4 flex justify-end space-x-2">
                <button class="bg-white border border-gray-border hover:border-primary text-gray-text hover:text-primary px-4 py-2 rounded-md transition-all-300">
                    取消
                </button>
                <button class="bg-success hover:bg-success/90 text-white px-4 py-2 rounded-md transition-all-300">
                    保存
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 权限设置模态框
            const permissionButtons = document.querySelectorAll('[title="设置权限"]');
            const permissionModal = document.getElementById('permission-modal');
            const closePermissionModal = document.getElementById('close-permission-modal');
            
            permissionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // 获取用户信息
                    const userName = this.closest('tr').querySelector('td:nth-child(2)').textContent;
                    document.getElementById('modal-user-name').textContent = userName;
                    
                    // 显示模态框
                    permissionModal.classList.remove('hidden');
                });
            });
            
            // 关闭权限设置模态框
            function hidePermissionModal() {
                permissionModal.classList.add('hidden');
            }
            
            if (closePermissionModal) {
                closePermissionModal.addEventListener('click', hidePermissionModal);
            }
            
            // 保存按钮点击事件
            const savePermissionButton = permissionModal.querySelector('button.bg-success');
            if (savePermissionButton) {
                savePermissionButton.addEventListener('click', hidePermissionModal);
            }
            
            // 实现父子联动功能
            function setupParentChildRelation() {
                const checkboxes = permissionModal.querySelectorAll('input[type="checkbox"]');
                
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        const parentElement = this.closest('div').parentElement;
                        
                        // 处理子复选框变化时父复选框的状态
                        if (parentElement && parentElement.querySelector('input[type="checkbox"]')) {
                            const parentCheckbox = parentElement.querySelector('input[type="checkbox"]');
                            const childCheckboxes = parentElement.querySelectorAll('div input[type="checkbox"]');
                            
                            // 检查是否有任何子复选框被选中
                            const anyChildChecked = Array.from(childCheckboxes).some(child => child.checked);
                            
                            // 如果有子复选框被选中，选中父复选框
                            if (anyChildChecked) {
                                parentCheckbox.checked = true;
                            } else {
                                // 否则取消选中父复选框
                                parentCheckbox.checked = false;
                            }
                        }
                        
                        // 处理父复选框变化时子复选框的状态
                        const childElements = this.closest('div').querySelectorAll('div input[type="checkbox"]');
                        if (childElements.length > 0) {
                            childElements.forEach(child => {
                                child.checked = this.checked;
                            });
                        }
                    });
                });
            }
            
            // 初始化父子关系
            setupParentChildRelation();
            
            // 点击模态框外部关闭
            permissionModal.addEventListener('click', function(e) {
                if (e.target === permissionModal) {
                    hidePermissionModal();
                }
            });
        });
    </script>
    
    <!-- 添加用户模态框 -->
    <div id="add-user-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-hidden">
            <!-- 模态框标题 -->
            <div class="bg-white border-b border-gray-border p-4 flex justify-between items-center">
                <h3 class="text-lg font-semibold">添加用户</h3>
                <button id="close-add-user-modal" class="text-gray-text hover:text-danger transition-all-300">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <!-- 模态框内容 -->
            <div class="p-6 max-h-[calc(90vh-120px)] overflow-y-auto">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">用户账号</label>
                        <input type="text" placeholder="请输入用户账号" class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">姓名</label>
                        <input type="text" placeholder="请输入姓名" class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">密码</label>
                        <input type="password" placeholder="请输入密码" class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">确认密码</label>
                        <input type="password" placeholder="请确认密码" class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">所属部门</label>
                        <select class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                            <option>IT部门</option>
                            <option>设计部</option>
                            <option>生产部</option>
                            <option>财务部</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">角色</label>
                        <div class="border border-gray-border rounded-md p-3">
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                                    <span class="ml-2">管理员</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                                    <span class="ml-2">设计师</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                                    <span class="ml-2">审批人</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                                    <span class="ml-2">普通成员</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">状态</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="status" value="启用" checked class="mr-2 text-primary">
                                <span>启用</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="status" value="禁用" class="mr-2 text-primary">
                                <span>禁用</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 模态框底部 -->
            <div class="bg-white border-t border-gray-border p-4 flex justify-end space-x-2">
                <button id="cancel-add-user" class="bg-white border border-gray-border hover:border-primary text-gray-text hover:text-primary px-4 py-2 rounded-md transition-all-300">
                    取消
                </button>
                <button class="bg-success hover:bg-success/90 text-white px-4 py-2 rounded-md transition-all-300">
                    保存
                </button>
            </div>
        </div>
    </div>
    
    <!-- 编辑用户模态框 -->
    <div id="edit-user-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-hidden">
            <!-- 模态框标题 -->
            <div class="bg-white border-b border-gray-border p-4 flex justify-between items-center">
                <h3 class="text-lg font-semibold">编辑用户</h3>
                <button id="close-edit-user-modal" class="text-gray-text hover:text-danger transition-all-300">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <!-- 模态框内容 -->
            <div class="p-6 max-h-[calc(90vh-120px)] overflow-y-auto">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">用户账号</label>
                        <input type="text" value="admin" disabled class="w-full border border-gray-border rounded-md px-3 py-2 bg-gray-100">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">姓名</label>
                        <input type="text" value="管理员" class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">所属部门</label>
                        <select class="w-full border border-gray-border rounded-md px-3 py-2 focus:border-primary focus:outline-none">
                            <option>IT部门</option>
                            <option>设计部</option>
                            <option>生产部</option>
                            <option>财务部</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">角色</label>
                        <div class="border border-gray-border rounded-md p-3">
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                                    <span class="ml-2">管理员</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                                    <span class="ml-2">设计师</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                                    <span class="ml-2">审批人</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                                    <span class="ml-2">普通成员</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-text mb-1">状态</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="edit-status" value="启用" checked class="mr-2 text-primary">
                                <span>启用</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="edit-status" value="禁用" class="mr-2 text-primary">
                                <span>禁用</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 模态框底部 -->
            <div class="bg-white border-t border-gray-border p-4 flex justify-end space-x-2">
                <button id="cancel-edit-user" class="bg-white border border-gray-border hover:border-primary text-gray-text hover:text-primary px-4 py-2 rounded-md transition-all-300">
                    取消
                </button>
                <button class="bg-success hover:bg-success/90 text-white px-4 py-2 rounded-md transition-all-300">
                    保存
                </button>
            </div>
        </div>
    </div>
    
    <!-- 分配角色模态框 -->
    <div id="assign-role-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-hidden">
            <!-- 模态框标题 -->
            <div class="bg-white border-b border-gray-border p-4 flex justify-between items-center">
                <h3 class="text-lg font-semibold">分配角色</h3>
                <button id="close-assign-role-modal" class="text-gray-text hover:text-danger transition-all-300">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <!-- 模态框内容 -->
            <div class="p-6 max-h-[calc(90vh-120px)] overflow-y-auto">
                <div class="mb-6">
                    <h4 class="font-medium mb-2">用户：<span id="assign-role-user-name">管理员</span></h4>
                    <p class="text-sm text-gray-text">为该用户分配对应的角色</p>
                </div>
                
                <div class="space-y-3">
                    <label class="flex items-center">
                        <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded" checked>
                        <span class="ml-2">管理员</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                        <span class="ml-2">设计师</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                        <span class="ml-2">审批人</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="w-4 h-4 text-primary focus:ring-primary border-gray-border rounded">
                        <span class="ml-2">普通成员</span>
                    </label>
                </div>
            </div>
            
            <!-- 模态框底部 -->
            <div class="bg-white border-t border-gray-border p-4 flex justify-end space-x-2">
                <button id="cancel-assign-role" class="bg-white border border-gray-border hover:border-primary text-gray-text hover:text-primary px-4 py-2 rounded-md transition-all-300">
                    取消
                </button>
                <button class="bg-success hover:bg-success/90 text-white px-4 py-2 rounded-md transition-all-300">
                    保存
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 添加用户模态框
            const addUserButton = document.querySelector('button:has(i.fa-plus)');
            const addUserModal = document.getElementById('add-user-modal');
            const closeAddUserModal = document.getElementById('close-add-user-modal');
            const cancelAddUser = document.getElementById('cancel-add-user');
            
            if (addUserButton) {
                addUserButton.addEventListener('click', function() {
                    addUserModal.classList.remove('hidden');
                });
            }
            
            function hideAddUserModal() {
                addUserModal.classList.add('hidden');
            }
            
            if (closeAddUserModal) {
                closeAddUserModal.addEventListener('click', hideAddUserModal);
            }
            
            if (cancelAddUser) {
                cancelAddUser.addEventListener('click', hideAddUserModal);
            }
            
            // 保存按钮点击事件
            const saveAddUserButton = addUserModal.querySelector('button.bg-success');
            if (saveAddUserButton) {
                saveAddUserButton.addEventListener('click', hideAddUserModal);
            }
            
            // 点击模态框外部关闭
            addUserModal.addEventListener('click', function(e) {
                if (e.target === addUserModal) {
                    hideAddUserModal();
                }
            });
            
            // 编辑用户模态框
            const editButtons = document.querySelectorAll('[title="编辑"]');
            const editUserModal = document.getElementById('edit-user-modal');
            const closeEditUserModal = document.getElementById('close-edit-user-modal');
            const cancelEditUser = document.getElementById('cancel-edit-user');
            
            editButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // 获取用户信息
                    const userName = this.closest('tr').querySelector('td:nth-child(2)').textContent;
                    const userAccount = this.closest('tr').querySelector('td:nth-child(1)').textContent;
                    
                    // 显示模态框
                    editUserModal.classList.remove('hidden');
                });
            });
            
            function hideEditUserModal() {
                editUserModal.classList.add('hidden');
            }
            
            if (closeEditUserModal) {
                closeEditUserModal.addEventListener('click', hideEditUserModal);
            }
            
            if (cancelEditUser) {
                cancelEditUser.addEventListener('click', hideEditUserModal);
            }
            
            // 保存按钮点击事件
            const saveEditUserButton = editUserModal.querySelector('button.bg-success');
            if (saveEditUserButton) {
                saveEditUserButton.addEventListener('click', hideEditUserModal);
            }
            
            // 点击模态框外部关闭
            editUserModal.addEventListener('click', function(e) {
                if (e.target === editUserModal) {
                    hideEditUserModal();
                }
            });
            
            // 分配角色模态框
            const assignRoleButtons = document.querySelectorAll('[title="分配角色"]');
            const assignRoleModal = document.getElementById('assign-role-modal');
            const closeAssignRoleModal = document.getElementById('close-assign-role-modal');
            const cancelAssignRole = document.getElementById('cancel-assign-role');
            
            assignRoleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // 获取用户信息
                    const userName = this.closest('tr').querySelector('td:nth-child(2)').textContent;
                    document.getElementById('assign-role-user-name').textContent = userName;
                    
                    // 显示模态框
                    assignRoleModal.classList.remove('hidden');
                });
            });
            
            function hideAssignRoleModal() {
                assignRoleModal.classList.add('hidden');
            }
            
            if (closeAssignRoleModal) {
                closeAssignRoleModal.addEventListener('click', hideAssignRoleModal);
            }
            
            if (cancelAssignRole) {
                cancelAssignRole.addEventListener('click', hideAssignRoleModal);
            }
            
            // 保存按钮点击事件
            const saveAssignRoleButton = assignRoleModal.querySelector('button.bg-success');
            if (saveAssignRoleButton) {
                saveAssignRoleButton.addEventListener('click', hideAssignRoleModal);
            }
            
            // 点击模态框外部关闭
            assignRoleModal.addEventListener('click', function(e) {
                if (e.target === assignRoleModal) {
                    hideAssignRoleModal();
                }
            });
        });
    </script>
</body>
</html>


